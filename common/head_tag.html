<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,500"
  rel="stylesheet"
/>

<!--
  <script type="text/discourse-plugin" version="0.8">
      api.decorateWidget('header-icons:before', helper => {
          return helper.h('li', [
              helper.h('a', {
                  href:'https://kete.nzte.govt.nz/learn',
              }, helper.h('p.nav-item', 'Learn')),
          ]);
      });
  </script>

  <script type="text/discourse-plugin" version="0.8">
      api.decorateWidget('header-icons:before', helper => {
          return helper.h('li', [
              helper.h('a', {
                  href:'/#',
              }, helper.h('p.nav-item.is-active', 'Forum')),
          ]);
      });
  </script>

  <script type="text/discourse-plugin" version="0.8">
      api.decorateWidget('header-icons:before', helper => {
          return helper.h('li', [
              helper.h('a', {
                  href:'https://kete.nzte.govt.nz/company',
              }, helper.h('p.nav-item', 'Plan')),
          ]);
      });
  </script>

  <script type="text/discourse-plugin" version="0.4">
      api.decorateWidget('home-logo:before', helper => {
          return helper.h('a', {
              href:'https://kete.nzte.govt.nz/'
          }, [
              helper.h('img.main-logo', {
                  src:'https://ketedev.nzte.govt.nz/nztelogo.png'
              })
          ])
      });
  </script>
-->

<script
  type="text/x-handlebars"
  data-template-name="/connectors/below-site-header/foobar"
>
  <div id="headerBanner">
      <div class="wrap">
          <h1>Kete Community</h1>
          <p>Your forum to ask questions, post new discussions or join in on existing discussions by other NZTE customers.</p>
      </div>
  </div>
</script>

<script>
  function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
  }
</script>

<script>
  function navFunction() {
    var x = document.getElementById("mobileNav");
    if (x.style.display === "block") {
      x.style.display = "none";
    } else {
      x.style.display = "block";
    }
  }
</script>

<script
  type="text/x-handlebars"
  data-template-name="/connectors/before-group-container/foobar2"
>
  <div>
      <div class="wrap">
          <p>doom</p>
      </div>
  </div>
</script>

<!--
  <script type="text/discourse-plugin" version="0.4">
    api.decorateWidget('list-controls:before', helper => {
      return helper.h('li', [
      helper.h('a.icon', {
          href:'https://foo.bar.com/',
          title: 'Foobar'
      }, helper.h('i.fa.fa-heart.d-icon')),
  ]);
    });
  </script>
-->

<script type="text/x-handlebars" data-template-name="components/d-navigation">
  {{bread-crumbs categories=categories category=category noSubcategories=noSubcategories}}

  {{#if showCategoryAdmin}}
    {{categories-admin-dropdown
      create=createCategory
      reorder=reorderCategories}}
  {{/if}}

  {{navigation-bar navItems=navItems filterMode=filterMode category=category}}

  {{#if showCategoryNotifications}}
    {{category-notifications-button value=category.notification_level category=category}}
  {{/if}}

  {{create-topic-button
    canCreateTopic=canCreateTopic
    action=createTopic
    disabled=createTopicDisabled
    label=createTopicLabel
  }}

  {{#if showCategoryEdit}}
    {{d-button
      class="btn-default edit-category"
      action=editCategory
      icon="wrench"
      label="category.edit_long"}}
  {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="components/bread-crumbs">
  {{
      category-drop
      category=firstCategory
      categories=parentCategoriesSorted
      countSubcategories=true
    }}

    {{#if childCategories}}
      {{category-drop
        category=secondCategory
        parentCategory=firstCategory
        categories=childCategories
        subCategory=true
        noSubcategories=noSubcategories}}
    {{/if}}

    {{#if siteSettings.tagging_enabled}}
      {{tag-drop firstCategory=firstCategory secondCategory=secondCategory tagId=tagId}}
    {{/if}}

    {{plugin-outlet name="bread-crumbs-right" connectorTagName="li"}}

    <div class='clear'></div>
</script>

<script type="text/x-handlebars" data-template-name="topic-list-header.raw">
    
  </script>

  <script type="text/x-handlebars" data-template-name="discovery/topics">
    {{#if redirectedReason}}
    <div class="alert alert-info">{{redirectedReason}}</div>
  {{/if}}
  
  {{#if showDismissAtTop}}
    <div class="row">
      {{#if showDismissRead}}
        <button title="{{i18n 'topics.bulk.dismiss_tooltip'}}" id='dismiss-topics-top' class='btn btn-default dismiss-read' {{action "dismissReadPosts"}}>{{i18n 'topics.bulk.dismiss_button'}}</button>
      {{/if}}
      {{#if showResetNew}}
      <button id='dismiss-new-top' class='btn btn-default dismiss-read' {{action "resetNew"}}>{{d-icon "check"}} {{i18n 'topics.bulk.dismiss_new'}}</button>
      {{/if}}
    </div>
  {{/if}}
  
  {{#if model.sharedDrafts}}
    {{topic-list
      class="shared-drafts"
      listTitle="shared_drafts.title"
      top=top
      hideCategory="true"
      category=category
      topics=model.sharedDrafts
      discoveryList=true}}
  {{/if}}
  
  {{bulk-select-button selected=selected action="refresh" category=category}}
  
  {{#discovery-topics-list model=model refresh="refresh" incomingCount=topicTrackingState.incomingCount}}
    {{#if top}}
      <div class='top-lists'>
        {{period-chooser period=period action="changePeriod"}}
      </div>
    {{else}}
      {{#if topicTrackingState.hasIncoming}}
        <div class="show-more {{if hasTopics 'has-topics'}}">
          <div class='alert alert-info clickable' {{action "showInserted"}}>
            <a tabindex="0" href="" {{action "showInserted"}}>
              {{count-i18n key="topic_count_" suffix=topicTrackingState.filter count=topicTrackingState.incomingCount}}
            </a>
          </div>
        </div>
      {{/if}}
    {{/if}}
  
    {{#if hasTopics}}
      {{topic-list
        highlightLastVisited=true
        top=top
        showTopicPostBadges=showTopicPostBadges
        showPosters=true
        canBulkSelect=canBulkSelect
        changeSort="changeSort"
        toggleBulkSelect="toggleBulkSelect"
        hideCategory=model.hideCategory
        order=order
        ascending=ascending
        bulkSelectEnabled=bulkSelectEnabled
        selected=selected
        expandGloballyPinned=expandGloballyPinned
        expandAllPinned=expandAllPinned
        category=category
        topics=model.topics
        discoveryList=true}}
    {{/if}}
  {{/discovery-topics-list}}
  
  <footer class='topic-list-bottom'>
    {{conditional-loading-spinner condition=model.loadingMore}}
    {{#if allLoaded}}
      {{#if showDismissRead}}
        <button title="{{i18n 'topics.bulk.dismiss_tooltip'}}" id='dismiss-topics' class='btn btn-default dismiss-read' {{action "dismissReadPosts"}}>{{i18n 'topics.bulk.dismiss_button'}}</button>
      {{/if}}
      {{#if showResetNew}}
        <button id='dismiss-new' class='btn btn-default dismiss-read' {{action "resetNew"}}>
          {{d-icon "check"}} {{i18n 'topics.bulk.dismiss_new'}}</button>
      {{/if}}
  
      {{#footer-message education=footerEducation message=footerMessage}}
        {{#if latest}}
          {{#if canCreateTopicOnCategory}}<a href {{action "createTopic"}}>{{i18n 'topic.suggest_create_topic'}}</a>.{{/if}}
        {{else if top}}
          {{#link-to "discovery.categories"}}{{i18n 'topic.browse_all_categories'}}{{/link-to}}, {{#link-to 'discovery.latest'}}{{i18n 'topic.view_latest_topics'}}{{/link-to}} {{i18n 'or'}} {{i18n 'filters.top.other_periods'}}.
          {{top-period-buttons period=period action="changePeriod"}}
        {{else}}
          {{#link-to "discovery.categories"}} {{i18n 'topic.browse_all_categories'}}{{/link-to}} {{i18n 'or'}} {{#link-to 'discovery.latest'}}{{i18n 'topic.view_latest_topics'}}{{/link-to}}.
        {{/if}}
      {{/footer-message}}
  
    {{/if}}
  </footer>
  
</script>


<script type="text/x-handlebars" data-template-name="components/user-card-contents">
    {{#if visible}}
  <div class="card-content">
    <div class="user-card-avatar">
      <a href={{user.path}} {{action "showUser"}} class="card-huge-avatar">{{bound-avatar user "huge"}}</a>
      {{#if user.primary_group_name}}
        {{avatar-flair
          flairURL=user.primary_group_flair_url
          flairBgColor=user.primary_group_flair_bg_color
          flairColor=user.primary_group_flair_color
          groupName=user.primary_group_name}}
      {{/if}}
      {{plugin-outlet name="user-card-avatar-flair" args=(hash user=user) tagName='div'}}
    </div>

    <div class="names">
      <span>
        <h1 class="{{staff}} {{new_user}} {{if nameFirst "full-name" "username"}}">
          <a href={{user.path}} {{action "showUser"}}>{{if nameFirst user.name (format-username username)}} {{user-status user currentUser=currentUser}}</a>
        </h1>
        {{plugin-outlet name="user-card-after-username" args=(hash user=user) tagName=''}}

        {{#unless nameFirst}}
          {{#if user.name}}
            <h2 class='full-name'>{{user.name}}</h2>
          {{/if}}
        {{else}}
          <h2 class='username'>{{username}}</h2>
        {{/unless}}

        {{#if user.title}}
          <h2>{{user.title}}</h2>
        {{/if}}

        {{#if user.staged}}
          <h2 class="staged">{{i18n 'user.staged'}}</h2>
        {{/if}}

        {{plugin-outlet name="user-card-post-names" args=(hash user=user) tagName='div'}}
      </span>
    </div>

    <ul class="usercard-controls">
      {{#if user.can_send_private_message_to_user}}
        <li class='compose-pm'>
          {{d-button
            class="btn-primary"
            action=(action "composePrivateMessage" user post)
            icon="envelope"
            label="user.private_message"}}
        </li>
      {{/if}}

      {{#if showFilter}}
        <li>
          {{d-button
            class="btn-default"
            action=(action "togglePosts" user)
            icon="filter"
            translatedLabel=togglePostsLabel}}
        </li>
      {{/if}}

      {{#if hasUserFilters}}
        <li>
          {{d-button
            action="cancelFilter"
            icon="times"
            label="topic.filters.cancel"}}
        </li>
      {{/if}}

      {{#if showDelete}}
        <li>
          {{d-button
            class="btn-danger"
            action=(action "deleteUser" user)
            icon="exclamation-triangle"
            label="admin.user.delete"}}
        </li>
      {{/if}}
    </ul>

    {{plugin-outlet
      name="user-card-additional-controls"
      args=(hash user=user close=(action "close"))
      tagName=""}}

    {{#if user.suspend_reason}}
      <div class='suspended'>
        {{d-icon "ban"}}
        <b>{{i18n 'user.suspended_notice' date=user.suspendedTillDate}}</b><br>
        <b>{{i18n 'user.suspended_reason'}}</b> {{user.suspend_reason}}
      </div>
    {{else}}
      {{#if user.bio_cooked}}<div class='bio'>{{text-overflow class="overflow" text=user.bio_excerpt}}</div>{{/if}}
    {{/if}}

    {{#if hasLocationOrWebsite}}
      <div class="location-and-website">
        {{#if user.location}}
          <span class='location'>{{d-icon "map-marker"}} <span>{{user.location}}</span></span>
        {{/if}}

        {{#if user.website_name}}
          <span class='website-name'>
            {{d-icon "globe"}}
            {{#if linkWebsite}}
              <a href={{user.website}} rel={{unless removeNoFollow 'nofollow noopener'}} target="_blank">{{user.website_name}}</a>
            {{else}}
              <span title={{user.website}}>{{user.website_name}}</span>
            {{/if}}
          </span>
        {{/if}}

        {{plugin-outlet name="user-card-location-and-website" args=(hash user=user)}}
      </div>
    {{/if}}

    {{#if user}}
      {{#unless user.profile_hidden}}
        <div class="metadata">
          {{#if user.last_posted_at}}
            <h3><span class='desc'>{{i18n 'last_post'}}</span> {{format-date user.last_posted_at leaveAgo="true"}}</h3>
          {{/if}}
          <h3><span class='desc'>{{i18n 'joined'}}</span> {{format-date user.created_at leaveAgo="true"}}</h3>
          <h3 title="{{timeReadTooltip}}">
            <span class='desc'>{{i18n 'time_read'}}</span>
            {{format-duration user.time_read}}
            {{#if showRecentTimeRead}}
              <span>({{i18n 'time_read_recently' time_read=recentTimeRead}})</span>
            {{/if}}
          </h3>
          {{#if showCheckEmail}}
            <h3 class="email">
              {{d-icon "envelope-o" title="user.email.title"}}
              {{#if user.email}}
                {{user.email}}
              {{else}}
                {{d-button action="checkEmail" actionParam=user icon="envelope-o" label="admin.users.check_email.text" class="btn-primary"}}
              {{/if}}
            </h3>
          {{/if}}
          {{plugin-outlet name="user-card-metadata" args=(hash user=user)}}
        </div>
      {{/unless}}

      {{plugin-outlet name="user-card-after-metadata" args=(hash user=user)}}

    {{/if}}

    {{#if publicUserFields}}
      <div class="public-user-fields">
        {{#each publicUserFields as |uf|}}
          {{#if uf.value}}
            <div class="public-user-field {{uf.field.dasherized_name}}">
              <span class="user-field-name">{{uf.field.name}}:</span>
              <span class="user-field-value">{{uf.value}}</span>
            </div>
          {{/if}}
        {{/each}}
      </div>
    {{/if}}

    {{plugin-outlet name="user-card-before-badges" args=(hash user=user)}}

    {{#if showBadges}}
      {{#if user.featured_user_badges}}
      <div class="badge-section">
        {{#each user.featured_user_badges as |ub|}}
          {{user-badge badge=ub.badge user=user}}
        {{/each}}
        {{#if showMoreBadges}}
          {{#link-to 'user.badges' user class="btn more-user-badges"}}
            {{i18n 'badges.more_badges' count=moreBadgesCount}}
          {{/link-to}}
        {{/if}}
      </div>
     {{/if}}
    {{/if}}
  </div>
{{/if}}

</script>