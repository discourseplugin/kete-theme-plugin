<link
  href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,500"
  rel="stylesheet"
/>

<!--
  <script type="text/discourse-plugin" version="0.8">
      api.decorateWidget('header-icons:before', helper => {
          return helper.h('li', [
              helper.h('a', {
                  href:'https://kete.nzte.govt.nz/learn',
              }, helper.h('p.nav-item', 'Learn')),
          ]);
      });
  </script>

  <script type="text/discourse-plugin" version="0.8">
      api.decorateWidget('header-icons:before', helper => {
          return helper.h('li', [
              helper.h('a', {
                  href:'/#',
              }, helper.h('p.nav-item.is-active', 'Forum')),
          ]);
      });
  </script>

  <script type="text/discourse-plugin" version="0.8">
      api.decorateWidget('header-icons:before', helper => {
          return helper.h('li', [
              helper.h('a', {
                  href:'https://kete.nzte.govt.nz/company',
              }, helper.h('p.nav-item', 'Plan')),
          ]);
      });
  </script>

  <script type="text/discourse-plugin" version="0.4">
      api.decorateWidget('home-logo:before', helper => {
          return helper.h('a', {
              href:'https://kete.nzte.govt.nz/'
          }, [
              helper.h('img.main-logo', {
                  src:'https://ketedev.nzte.govt.nz/nztelogo.png'
              })
          ])
      });
  </script>
-->

<script
  type="text/x-handlebars"
  data-template-name="/connectors/below-site-header/foobar">
  <div id="headerBanner">
      <div class="wrap">
          <h1>Kete Community</h1>
          <p>Your forum to ask questions, post new discussions or join in on existing discussions by other NZTE customers.</p>
      </div>
  </div>
</script>



<script>
  function myFunction() {
    document.getElementById("myDropdown").classList.toggle("show");
  }
</script>

<script>
  function navFunction() {
    var x = document.getElementById("mobileNav");
    if (x.style.display === "block") {
      x.style.display = "none";
    } else {
      x.style.display = "block";
    }
  }
</script>

<script
  type="text/x-handlebars"
  data-template-name="/connectors/before-group-container/foobar2"
>
  <div>
      <div class="wrap">
          <p>doom</p>
      </div>
  </div>
</script>

<!--
  <script type="text/discourse-plugin" version="0.4">
    api.decorateWidget('list-controls:before', helper => {
      return helper.h('li', [
      helper.h('a.icon', {
          href:'https://foo.bar.com/',
          title: 'Foobar'
      }, helper.h('i.fa.fa-heart.d-icon')),
  ]);
    });
  </script>
-->

<script type="text/x-handlebars" data-template-name="components/d-navigation">
  {{bread-crumbs categories=categories category=category noSubcategories=noSubcategories}}

  {{#if showCategoryAdmin}}
    {{categories-admin-dropdown
      create=createCategory
      reorder=reorderCategories}}
  {{/if}}

  {{navigation-bar navItems=navItems filterMode=filterMode category=category}}

  {{#if showCategoryNotifications}}
    {{category-notifications-button value=category.notification_level category=category}}
  {{/if}}

  {{create-topic-button
    canCreateTopic=canCreateTopic
    action=createTopic
    disabled=createTopicDisabled
    label=createTopicLabel
  }}

  {{#if showCategoryEdit}}
    {{d-button
      class="btn-default edit-category"
      action=editCategory
      icon="wrench"
      label="category.edit_long"}}
  {{/if}}
</script>

<script type="text/x-handlebars" data-template-name="components/bread-crumbs">
  {{
      category-drop
      category=firstCategory
      categories=parentCategoriesSorted
      countSubcategories=true
    }}

    {{#if childCategories}}
      {{category-drop
        category=secondCategory
        parentCategory=firstCategory
        categories=childCategories
        subCategory=true
        noSubcategories=noSubcategories}}
    {{/if}}

    {{#if siteSettings.tagging_enabled}}
      {{tag-drop firstCategory=firstCategory secondCategory=secondCategory tagId=tagId}}
    {{/if}}

    {{plugin-outlet name="bread-crumbs-right" connectorTagName="li"}}

    <div class='clear'></div>
</script>

<script
  type="text/x-handlebars"
  data-template-name="topic-list-header.raw">
</script>

<script type="text/x-handlebars" data-template-name="discovery/topics">
    {{#if redirectedReason}}
        <div class="alert alert-info">{{redirectedReason}}</div>
    {{/if}}

  {{#if showDismissAtTop}}
    <div class="row">
      {{#if showDismissRead}}
        <button title="{{i18n 'topics.bulk.dismiss_tooltip'}}" id='dismiss-topics-top' class='btn btn-default dismiss-read' {{action "dismissReadPosts"}}>{{i18n 'topics.bulk.dismiss_button'}}</button>
      {{/if}}
      {{#if showResetNew}}
        <button id='dismiss-new-top' class='btn btn-default dismiss-read' {{action "resetNew"}}>{{d-icon "check"}} {{i18n 'topics.bulk.dismiss_new'}}</button>
      {{/if}}
    </div>
  {{/if}}

  {{#if model.sharedDrafts}}
    {{topic-list
      class="shared-drafts"
      listTitle="shared_drafts.title"
      top=top
      hideCategory="true"
      category=category
      topics=model.sharedDrafts
      discoveryList=true}}
  {{/if}}

  {{bulk-select-button selected=selected action="refresh" category=category}}

  {{#discovery-topics-list model=model refresh="refresh" incomingCount=topicTrackingState.incomingCount}}
    {{#if top}}
      <div class='top-lists'>
        {{period-chooser period=period action="changePeriod"}}
      </div>
    {{else}}
      {{#if topicTrackingState.hasIncoming}}
        <div class="show-more {{if hasTopics 'has-topics'}}">
          <div class='alert alert-info clickable' {{action "showInserted"}}>
            <a tabindex="0" href="" {{action "showInserted"}}>
              {{count-i18n key="topic_count_" suffix=topicTrackingState.filter count=topicTrackingState.incomingCount}}
            </a>
          </div>
        </div>
      {{/if}}
    {{/if}}

    {{#if hasTopics}}
      {{topic-list
        highlightLastVisited=true
        top=top
        showTopicPostBadges=showTopicPostBadges
        showPosters=true
        canBulkSelect=canBulkSelect
        changeSort="changeSort"
        toggleBulkSelect="toggleBulkSelect"
        hideCategory=model.hideCategory
        order=order
        ascending=ascending
        bulkSelectEnabled=bulkSelectEnabled
        selected=selected
        expandGloballyPinned=expandGloballyPinned
        expandAllPinned=expandAllPinned
        category=category
        topics=model.topics
        discoveryList=true}}
    {{/if}}
  {{/discovery-topics-list}}

  <footer class='topic-list-bottom'>
    {{conditional-loading-spinner condition=model.loadingMore}}
    {{#if allLoaded}}
      {{#if showDismissRead}}
        <button title="{{i18n 'topics.bulk.dismiss_tooltip'}}" id='dismiss-topics' class='btn btn-default dismiss-read' {{action "dismissReadPosts"}}>{{i18n 'topics.bulk.dismiss_button'}}</button>
      {{/if}}
      {{#if showResetNew}}
        <button id='dismiss-new' class='btn btn-default dismiss-read' {{action "resetNew"}}>
          {{d-icon "check"}} {{i18n 'topics.bulk.dismiss_new'}}</button>
      {{/if}}

      {{#footer-message education=footerEducation message=footerMessage}}
        {{#if latest}}
          {{#if canCreateTopicOnCategory}}<a href {{action "createTopic"}}>{{i18n 'topic.suggest_create_topic'}}</a>.{{/if}}
        {{else if top}}
          {{#link-to "discovery.categories"}}{{i18n 'topic.browse_all_categories'}}{{/link-to}}, {{#link-to 'discovery.latest'}}{{i18n 'topic.view_latest_topics'}}{{/link-to}} {{i18n 'or'}} {{i18n 'filters.top.other_periods'}}.
          {{top-period-buttons period=period action="changePeriod"}}
        {{else}}
          {{#link-to "discovery.categories"}} {{i18n 'topic.browse_all_categories'}}{{/link-to}} {{i18n 'or'}} {{#link-to 'discovery.latest'}}{{i18n 'topic.view_latest_topics'}}{{/link-to}}.
        {{/if}}
      {{/footer-message}}

    {{/if}}
  </footer>
</script>

<script type="text/x-handlebars" data-template-name="discovery">
  <div class="container">
        {{mount-widget widget="my-widget"}}
          {{discourse-banner user=currentUser banner=site.banner}}
        </div>

        <div class="list-controls">
          <div class="container">
            {{outlet "navigation-bar"}}
          </div>
        </div>

        {{conditional-loading-spinner condition=loading}}

        <div class="container list-container {{if loading "hidden"}}">
          <div class="row">
            <div class="full-width">
              <div id="header-list-area">
                {{outlet "header-list-container"}}
              </div>
            </div>
          </div>
          <div class="row">
            <div class="full-width">
              <div id="list-area">
                {{plugin-outlet name="discovery-list-container-top"
                                args=(hash category=category listLoading=loading)}}
                {{outlet "list-container"}}
              </div>
            </div>
          </div>
        </div>

        {{plugin-outlet name="discovery-below"}}
</script>

<script type="text/x-handlebars" data-template-name="current-user">
    <li class="profile-dropdown" onclick="myFunction()">
        <span  class="dropbtn">
            <img
                    class="profile-avatar"
                    src="https://keteuat.nzte.govt.nz/blank-avatar.png"
                    height="44"
                    width="44"/>
            <span class="profile-name">{{Discourse.User.current().name}}</span>
            <img
                    class="profile-arrow"
                    height="24"
                    width="24"
                    src="https://ketedev.nzte.govt.nz/icon/expand.png"/>
        </span>
        <div id="myDropdown" class="dropdown-content">
            <a class="nav-dropdown-item" href="#home">My Profile</a>
            <a class="nav-dropdown-item" href="#about">My Company</a>
            <a class="nav-dropdown-item" href="#contact">Sign Out</a>
        </div>
    </li>
</script>


<!-- widgets -->
<script>
import { createWidget } from 'discourse/widgets/widget';
import { h } from 'virtual-dom';

createWidget('my-widget', {
  tagName: 'div.hello',

  html() {
    return h('span.greeting', h('b', "hello world"));
  }
});
</script>

<script type="text/discourse-plugin" version="0.8.13">
    api.reopenWidget("home-logo", {
        api.reopenWidget("home-logo", {
            logo() {
              const { siteSettings } = this,
                { iconNode } = require("discourse/helpers/fa-icon-node"),
                h = require("virtual-dom").h,
                altLogo = settings.Alternative_logo_url,
                altLogoSmall = settings.Alternative_small_logo_url,
                mobileView = this.site.mobileView,
                mobileLogoUrl = siteSettings.mobile_logo_url || "",
                showMobileLogo = mobileView && mobileLogoUrl.length > 0;
              (logoUrl = altLogo || ""),
              (title = siteSettings.title);
              if (!mobileView && this.attrs.minimized) {
                const logoSmallUrl = altLogoSmall || "";
                if (logoSmallUrl.length) {
                  return h("img#site-logo.logo-small", {
                    key: "logo-small",
                    attributes: { src: logoSmallUrl, width: 33, height: 33, alt: title }
                  });
                } else {
                  return iconNode("home");
                }
              } else if (showMobileLogo) {
                return h("img#site-logo.logo-big", {
                  key: "logo-mobile",
                  attributes: { src: mobileLogoUrl, alt: title }
                });
              } else if (logoUrl.length) {
                return h("img#site-logo.logo-big", {
                  key: "logo-big",
                  attributes: { src: logoUrl, alt: title }
                });
              } else {
                return h("h1#site-text-logo.text-logo", { key: "logo-text" }, title);
              }
            }
          });
    });
    </script>